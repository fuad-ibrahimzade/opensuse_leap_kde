var PageNotes=function(){};PageNotes.prototype.getSource=function(){return localStorage.pagenotes};PageNotes.prototype.get=function(a){var b=this.getAll();if(b)return b[a]&&"string"!==typeof b[a]?b[a][0]:b[a]};PageNotes.prototype.getNotesObj=function(a){var b=this.getAll();if(b)return b[a]};PageNotes.prototype.getAll=function(){var a=this.getSource();return a?JSON.parse(a):{}};
PageNotes.prototype.set=function(a,b,c,e){var d=this.getSource();d=d?JSON.parse(d):{};var f=!0,g;for(g in d){"string"!==typeof d[g]&&(f=!0);break}d[a]=b;f&&(c||=new Date,d[a]=[b,c]);void 0!==e&&1==e&&(d[a]=[b,c,e]);this.setSource(d)};PageNotes.prototype.setNotesObj=function(a,b){var c=this.getSource();c=c?JSON.parse(c):{};c[a]=b;this.setSource(c)};PageNotes.prototype.setSource=function(a){"string"!==typeof a&&(a=JSON.stringify(a));localStorage.pagenotes=a};
PageNotes.prototype.remove=function(a){var b=this.getSource();b=b?JSON.parse(b):{};delete b[a];this.setSource(b)};function formatDate(a){a=new Date(a);return a.toDateString().replace(/^[^ ]+ /,"")+" "+a.toTimeString().replace(/ GMT.*$/,"")}
PageNotes.prototype.csvFormat=function(){var a=[];a.push('URL","Date","Notes","Encrypted');var b=this.getAll();for(let d in b){var c=b[d],e="false";3<=c.length&&c[2]&&(e="true");a.push([d,formatDate(c[1]),c[0],e].map(function(f){return f.replace(/"/g,'""')}).join('","'))}return'"'+a.join('"\r\n"')+'"'};
